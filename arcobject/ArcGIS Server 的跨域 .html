<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ArcGIS Server的跨域 · yatsov的博客</title><meta name="description" content="ArcGIS Server的跨域 - yatsov"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yatsov.github.io/atom.xml" title="yatsov的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">目录</a></li><li class="nav-list-item"><a href="/categories/index.html" target="_self" class="nav-list-link">分类</a></li><li class="nav-list-item"><a href="https://github.com/yatsov/yatsov.github.io" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/index.html" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="/work/index.html" target="_self" class="nav-list-link">作品</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ArcGIS Server的跨域</h1><div class="post-info">2018年4月21日</div><div class="post-content"><p>ArcGIS Server的跨域<br><a id="more"></a></p>
<h3 id="1-1-跨域的主要方式"><a href="#1-1-跨域的主要方式" class="headerlink" title="1.1 跨域的主要方式"></a>1.1 跨域的主要方式</h3><p>跨域方式主要有：1、jsoup 2、后台代理转接 3 CORS 4 windows.domain 设置为统一域名 5 windows.name 6 websocket</p>
<h3 id="1-2-tomcat的跨域设置"><a href="#1-2-tomcat的跨域设置" class="headerlink" title="1.2 tomcat的跨域设置"></a>1.2 tomcat的跨域设置</h3><p>在TOMCAT_HOME/conf/web.xml上的Web-APP 标签内即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt; </span><br><span class="line">      &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt; </span><br><span class="line">      &lt;filter-class&gt;org.apache.catalina.filters.CorsFilter&lt;/filter-class&gt;       </span><br><span class="line">	  &lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.allowed.origins&lt;/param-name&gt;</span><br><span class="line">		&lt;param-value&gt;*&lt;/param-value&gt;       </span><br><span class="line">	  &lt;/init-param&gt;       </span><br><span class="line">	  &lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.allowed.methods&lt;/param-name&gt; </span><br><span class="line">        &lt;param-value&gt;GET,POST,HEAD,OPTIONS,PUT&lt;/param-value&gt;       </span><br><span class="line">	&lt;/init-param&gt;       </span><br><span class="line">	&lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.allowed.headers&lt;/param-name&gt;         </span><br><span class="line">		&lt;param-value&gt;Content-Type,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers&lt;/param-value&gt;</span><br><span class="line">	&lt;/init-param&gt;       </span><br><span class="line">	&lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.exposed.headers&lt;/param-name&gt;         </span><br><span class="line">		&lt;param-value&gt;Access-Control-Allow-Origin,Access-Control-Allow-Credentials&lt;/param-value&gt;</span><br><span class="line">	&lt;/init-param&gt;       </span><br><span class="line">	&lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.support.credentials&lt;/param-name&gt;</span><br><span class="line">		&lt;param-value&gt;true&lt;/param-value&gt;</span><br><span class="line">	&lt;/init-param&gt;       </span><br><span class="line">	&lt;init-param&gt; </span><br><span class="line">        &lt;param-name&gt;cors.preflight.maxage&lt;/param-name&gt;</span><br><span class="line">		&lt;param-value&gt;10&lt;/param-value&gt;       </span><br><span class="line">	&lt;/init-param&gt;     </span><br><span class="line">&lt;/filter&gt; </span><br><span class="line">&lt;filter-mapping&gt; </span><br><span class="line">    &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;</span><br><span class="line">	&lt;url-pattern&gt;/*&lt;/url-pattern&gt; </span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-3-ArcGIS-的tomcat的目录"><a href="#1-3-ArcGIS-的tomcat的目录" class="headerlink" title="1.3 ArcGIS 的tomcat的目录"></a>1.3 ArcGIS 的tomcat的目录</h3><p>&lt;ARCGIS_SERVER_HOME&gt;\framework\runtime\tomcat</p>
<h3 id="1-4-ArcGIS10-2-的CORS支持情况"><a href="#1-4-ArcGIS10-2-的CORS支持情况" class="headerlink" title="1.4 ArcGIS10.2 的CORS支持情况"></a>1.4 ArcGIS10.2 的CORS支持情况</h3><p>ArcGIS10.2 是支持CORS跨域的,如果你想操作ArcGIS Server 的API 只需要申请一个Token即可。</p>
<h3 id="1-5-JS示例"><a href="#1-5-JS示例" class="headerlink" title="1.5 JS示例"></a>1.5 JS示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function init() &#123;</span><br><span class="line">       $.ajax(&#123;  </span><br><span class="line">           type: &apos;post&apos;,  </span><br><span class="line">           crossDomain: true,  </span><br><span class="line">           url: &apos;http://localhost:6080/arcgis/admin/services/ShengYang/SYaccident.MapServer/stop?token=S_F4FXH9JTcnvUiJVITeoNj_NdmeGUHfSoi2rqsRvuYaQQbbbiF5Fwk7HiWI9ruJ&apos;,  </span><br><span class="line">           data: &#123;  </span><br><span class="line">               f:&apos;json&apos;,</span><br><span class="line">           </span><br><span class="line">           &#125;,  </span><br><span class="line">           dataType:&apos;json&apos;,  </span><br><span class="line">           xhrFields: &#123;  </span><br><span class="line">               &apos;Access-Control-Allow-Origin&apos;: &apos;*&apos;</span><br><span class="line">           &#125;,  </span><br><span class="line">           success: function(data, textStatus, jqXHR)&#123;  </span><br><span class="line">               // console.log(&quot;getAllResponseHeaders:&quot;+jqXHR.getAllResponseHeaders());  </span><br><span class="line">               console.dir(data);  </span><br><span class="line">               // Backbone.history.navigate(&quot;#booklist&quot;,true);  </span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/git基础命令笔记.html" class="prev">PREV</a><a href="/arcobject/ArcGIS地图发布与数据切片文档.html" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2018 <a href="http://yatsov.github.io">yatsov</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>